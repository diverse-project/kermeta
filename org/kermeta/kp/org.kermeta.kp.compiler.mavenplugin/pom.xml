
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  	
	<description>Maven plugin that compiles Kermeta 2 projects</description>
	<parent>
		<artifactId>language.root</artifactId>
		<groupId>org.kermeta.language</groupId>
		<version>2.0.7-SNAPSHOT</version>
	</parent>
	<modelVersion>4.0.0</modelVersion>
    <groupId>org.kermeta.kp</groupId>
    <artifactId>kp.compiler.mavenplugin</artifactId>
    <packaging>maven-plugin</packaging>
    <name>kp.compiler.mavenplugin :: Kermeta2 project compiler maven plugin</name>

	<properties>
		<scala.version>2.10.0-M2</scala.version>
	</properties>

	<build>
		<resources>
          <resource>
              <directory>src/main/resources</directory>
          </resource>
          <resource>
              <directory>${project.build.directory}/resources</directory>
          </resource>
      </resources>
		<plugins>
	    <!--  <plugin>
	        <groupId>org.apache.maven.plugins</groupId>
	        <artifactId>maven-dependency-plugin</artifactId>
	        <version>2.4</version>
	        <executions>
	          <execution>
	            <id>copy-dependencies</id>
	            <phase>generate-resources</phase>
	            <goals>
	              <goal>copy</goal>
	            </goals>
	            <configuration>
	              <artifactItems>
	              	<artifactItem>
	                  	<groupId>org.kermeta.kp</groupId>
            			<artifactId>kp.compiler.commandline.standalone</artifactId>
            			<version>${project.version}</version>
	                  	<overWrite>false</overWrite>	                  	
	              		<outputDirectory>${project.build.directory}/resources</outputDirectory>
	                  	<destFileName>kp.compiler.commandline.standalone.jar</destFileName>
	                </artifactItem>
	              </artifactItems>
	              <overWriteReleases>false</overWriteReleases>
	              <overWriteSnapshots>true</overWriteSnapshots>
	              <excludeTransitive>true</excludeTransitive>
	            </configuration>
	          </execution>
	        </executions>
	      </plugin> -->
	      <plugin>
                <groupId>org.scala-tools</groupId>
                <artifactId>maven-scala-plugin</artifactId>
          </plugin>
          <plugin>
			    <groupId>org.apache.maven.plugins</groupId>
			    <artifactId>maven-eclipse-plugin</artifactId>
			    <version>2.9</version>
			    <!-- see http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html for more information -->
			    <configuration>
			      <downloadSources>true</downloadSources>
			      <downloadJavadocs>true</downloadJavadocs>
			      <projectNameTemplate>org.kermeta.[artifactId]</projectNameTemplate>
			      <projectnatures>
			        <projectnature>org.eclipse.jdt.core.javanature</projectnature>
			      </projectnatures>
			      <classpathContainers>
			        <classpathContainer>org.eclipse.jdt.launching.JRE_CONTAINER</classpathContainer>
			      </classpathContainers>
			      <sourceIncludes>
			        <sourceInclude>**/*.java</sourceInclude>
			      </sourceIncludes>
			      <useProjectReferences>false</useProjectReferences>
			    </configuration>
			  </plugin>
	    </plugins>		
	</build>
    
    <dependencies>
        
        <dependency>
            <groupId>org.apache.maven</groupId>
            <artifactId>maven-core</artifactId>
            <version>3.0.4</version>
        </dependency>
        <dependency>
        	<groupId>org.kevoree</groupId>
        	<artifactId>org.kevoree.kcl</artifactId>
        	<version>1.8.2</version>
        </dependency>
        <dependency>
        	<groupId>org.kermeta.emf</groupId>
			<artifactId>emf.lib.patched</artifactId>
			<version>${emf.version}</version>
			<exclusions>
                <exclusion>
                    <artifactId>emf.lib</artifactId>
                    <groupId>org.kermeta.emf</groupId>
                </exclusion>
            </exclusions>
        </dependency>
		<dependency>
			<groupId>org.kermeta.utils</groupId>
			<artifactId>utils.systemservices.api</artifactId>
			<version>${utils.version}</version>
			<exclusions>
                <exclusion>
                    <artifactId>emf.lib</artifactId>
                    <groupId>org.kermeta.emf</groupId>
                </exclusion>
            </exclusions>
		</dependency>
		<dependency>
			<groupId>org.kermeta.utils</groupId>
			<artifactId>utils.helpers</artifactId>
			<version>${utils.version}</version>
			<exclusions>
                <exclusion>
                    <artifactId>emf.lib</artifactId>
                    <groupId>org.kermeta.emf</groupId>
                </exclusion>
            </exclusions>
		</dependency>
		<dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-library</artifactId>
            <version>${scala.version}</version>
        </dependency>
		<dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-compiler</artifactId>
            <version>${scala.version}</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>

            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>

        </dependency>
        <dependency>
        	<groupId>org.kermeta.utils</groupId>
        	<artifactId>utils.aether</artifactId>
        	<version>${utils.version}</version>
            <exclusions>
              <!-- <exclusion>
                    <artifactId>netty</artifactId>
                    <groupId>org.jboss.netty</groupId>
                </exclusion>
                <exclusion>
                    <groupId>org.sonatype.aether</groupId>
                    <artifactId>aether-connector-file</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.sonatype.aether</groupId>
            		<artifactId>aether-connector-asynchttpclient</artifactId>
                </exclusion>-->
                
                
            </exclusions>
        </dependency>
    </dependencies>
	
	<repositories>
        <repository>
            <id>kevoree-libs-release-local</id>
            <url>http://maven.kevoree.org/release</url>
        </repository>
        <repository>
            <id>kevoree-snapshots</id>
            <url>http://maven.kevoree.org/snapshots</url>
        </repository>
        <repository>
            <id>oss</id>
            <url>https://oss.sonatype.org/content/groups/public</url>
        </repository>
    </repositories>
</project>
