/* $Id:$ 
 * Creation : October 27, 2010
 * Licence  : EPL 
 * Copyright:
 * Authors  : 
 *            jfalcou
 */
@mainClass "org::kermeta::language::checker::MainCheckerV2"
@mainOperation "check"


package org::kermeta::language::checker;

require "platform:/lookup/org.kermeta.language.checker/src/main/kermeta/checker/checkerv2.kmt"
//require kermeta

using org::kermeta::language::structure
using kermeta::standard

class MainCheckerV2
{
	operation check(mu:ModelingUnit) : Void is do 
		
		
		// load 		
		/*var mu : org::kermeta::language::structure::ModelingUnit //init org::kermeta::language::structure::ModelingUnit.new
		
		var inputRep : kermeta::persistence::EMFRepository init kermeta::persistence::EMFRepository.new
		var inputRes : kermeta::persistence::EMFResource
		
		inputRes ?= inputRep.createResource("platform:/resource/kermetaV2Checker/model/test.km",
						"http://www.kermeta.org/kermeta/2_0_0/")
		
		inputRes.load()
		
		mu ?= inputRes.one
		
		stdio.writeln("Loaded modeling unit : " + mu.toString)
		mu.packages.each{p|
			stdio.writeln(" -> package :"  + p.name)
		}
		*/
		
		
	
		var myChecker : Checker init Checker.new
		
		// test only packages :
		mu.packages.each{ p | myChecker.checkObject(p) }
		
		
	end

}
