<project name="publish_web_documentation" default="publish_all">

	<property name="env.WORKSPACE" location="."/>
	<property name="deploy.server" value="web1.irisa.fr"/>
	<property name="deploy.user" value="web-triskell"/>
	<property name="deploy.path" value="/home/web/apache/sites/kermeta.org/htdocs/docs"/>
		
		
	<target name="publish_all" depends="">
	   	<antcall target="publish_kermeta_docs"/>
		<antcall target="publish_kmlogo_docs"/>
		<antcall target="publish_fsm_docs"/>
		<antcall target="publish_traceability_docs"/>
	</target>
	
	<target name="build_kermeta_docs" depends="">
		<ant antfile="Kermeta-Manual_build.xml"								dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all">	</ant>
		<ant antfile="Kermeta-MDK_build.xml"								dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all">	</ant>
		<ant antfile="KerMeta-UI-UserGuide_build.xml" 						dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
		<ant antfile="KerMeta-how-to-install-KerMeta_build.xml"  			dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
		<ant antfile="Kermeta-MDK_build.xml"  								dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
		<ant antfile="Kermeta-Tutorial-Process_build.xml"  					dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
		<ant antfile="Kermeta-Deploying-a-code_build.xml"  					dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
		<ant antfile="KermetaEMFTutorial_build.xml"  						dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
		<ant antfile="Kermeta-How-to-create-a-metamodel_build.xml"  		dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
		<ant antfile="Kermeta-How-to-add-behavior-to-a-metamodel_build.xml"	dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
		<ant antfile="Kermeta-How-to-use-run-configuration_build.xml"  		dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
		<ant antfile="ModelCheckingManual_build.xml"  						dir="imported_projects/fr.irisa.triskell.kermeta.documentation/src/" target="all"></ant>
	</target>
	<target name="publish_kermeta_docs" depends="build_kermeta_docs">
		<scp todir="${deploy.user}@${deploy.server}:${deploy.path}/fr.irisa.triskell.kermeta.documentation/build"
			keyfile="${key.file}"
			passphrase=""
		    trust="yes">
		    <fileset dir="imported_projects/fr.irisa.triskell.kermeta.documentation/build">
		      		<include name="**/**"/>
			      	<exclude name="**/docboo42/**"/>
				  	<exclude name="**/eclipse.help/**"/>
		    </fileset>
		</scp>
		<!-- <copy todir="exported_projects/fr.irisa.triskell.kermeta.documentation/build">
			    <fileset dir="imported_projects/fr.irisa.triskell.kermeta.documentation/build">
			      <include name="**/**"/>
			      <exclude name="**/docboo42/**"/>
				  <exclude name="**/eclipse.help/**"/>
			    </fileset>
		</copy> -->
	</target>
	
	<target name="build_kmlogo_docs" depends="">
			<ant antfile="Kermeta-Tutorial-Logo_build.xml"	dir="imported_projects/org.kermeta.kmlogo.logoasm.documentation/src/" target="all">	</ant>			
	</target>
	<target name="publish_kmlogo_docs" depends="build_kmlogo_docs">
		<scp todir="${deploy.user}@${deploy.server}:${deploy.path}/org.kermeta.kmlogo.logoasm.documentation/build"
			keyfile="${key.file}"
			passphrase=""
		    trust="yes">
		    <fileset dir="imported_projects/org.kermeta.kmlogo.logoasm.documentation/build">
		      		<include name="**/**"/>
			      	<exclude name="**/docboo42/**"/>
				  	<exclude name="**/eclipse.help/**"/>
		    </fileset>
		</scp>
	</target>
	
	<target name="build_fsm_docs" depends="">
		<ant antfile="KerMeta-The-FSM-example_build.xml"	dir="imported_projects/fr.irisa.triskell.kermeta.samples.fsm.documentation/src/" target="all">	</ant>
		<ant antfile="KerMeta-Create-FSM-Graphical-Editor-With-GMF_build.xml"	dir="imported_projects/fr.irisa.triskell.kermeta.samples.fsm.documentation/src/" target="all">	</ant>
	</target>
	<target name="publish_fsm_docs" depends="build_fsm_docs">
		<scp todir="${deploy.user}@${deploy.server}:${deploy.path}/fr.irisa.triskell.kermeta.samples.fsm.documentation/build"
			keyfile="${key.file}"
			passphrase=""
		    trust="yes">
		    <fileset dir="imported_projects/fr.irisa.triskell.kermeta.samples.fsm.documentation/build">
		      		<include name="**/**"/>
			      	<exclude name="**/docboo42/**"/>
				  	<exclude name="**/eclipse.help/**"/>
		    </fileset>
		</scp>
	</target>
	<target name="build_traceability_docs" depends="">
		<ant antfile="Traceability-MDK_build.xml"	dir="imported_projects/fr.irisa.triskell.traceability.documentation/src/" target="all">	</ant>			
	</target>
	<target name="publish_traceability_docs" depends="build_traceability_docs">
		<scp todir="${deploy.user}@${deploy.server}:${deploy.path}/fr.irisa.triskell.traceability.documentation/build"
			keyfile="${key.file}"
			passphrase=""
		    trust="yes">
		    <fileset dir="imported_projects/fr.irisa.triskell.traceability.documentation/build">
		      		<include name="**/**"/>
			      	<exclude name="**/docboo42/**"/>
				  	<exclude name="**/eclipse.help/**"/>
		    </fileset>
		</scp>
	</target>

</project>