/* $Id: $
 * Creation date: October 15, 2007
 * License:
 * Copyright:
 * Authors:
 */
@mainClass "uml2ModelsLoading::Main"
@mainOperation "main"


package uml2ModelsLoading;


require kermeta
require "http://www.eclipse.org/uml2/2.1.0/UML"

using kermeta::standard
using kermeta::persistence
using kermeta::kunit
using uml

class Main inherits TestCase
{

	attribute models : String[0..*]

	operation main() : Void is do 
		var tr : TestRunner init TestRunner.new
		tr.run(Main)
		tr.printTestResult		
	end

	operation testLoadModels() is do
		var modelURI : String init "platform:/plugin/org.kermeta.uml2.tests/test/models/SimpleBehavioredClass.uml"
		var repository : EMFRepository init EMFRepository.new
		var resource : Resource init repository.getResource( modelURI )
		if ( resource.contents.one.isInstanceOf(Model) ) then
			assertWithMsg(true, modelURI + " has been correctly loaded.")
			var model : Model
			model ?= resource.contents.one
			var p : uml::Package
			p ?= model.packagedElement.one
			assert( p.name.equals("SimpleBehavioredClass") )
			assert( p.packagedElement.size == 5 )
		else
			assertWithMsg(false, modelURI + " could not have been loaded.")
		end
	end

}