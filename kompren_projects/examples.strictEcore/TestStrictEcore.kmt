/* $Id:$ 
 * Creation : December 8, 2010
 * Licence  : EPL 
 * Copyright:
 * Authors  : 
 *            ablouin
 */
package ex::Ecore::strict;

using kermeta::emfpersistence
using kermeta::standard
using kermeta::utils
using ecore


class Test {
	operation main() : Void is do
		var inputRep : ResourceSet init ResourceSet.new
		var inputRes : Resource
		inputRes ?= inputRep.createResource("platform:/resource/examples.strictEcore/FML.ecore", "platform:/plugin/org.eclipse.emf.ecore")
		inputRes.load(void)
		var mu : EPackage
		mu ?= inputRes.getContents.one
		var requiredClazz : Bag<EClass> init Bag<EClass>.new
		
		var clazz : EClass init mu.eClassifiers.detect{clazz | clazz.isInstanceOf(EClass).andThen{b | clazz.asType(EClass).name=="FeatureModel"}}.asType(EClass)
		requiredClazz.add(clazz)
		var slicer : StrictEcore init StrictEcore.new.initialise(requiredClazz)
		
		slicer.launch()
	end
}
