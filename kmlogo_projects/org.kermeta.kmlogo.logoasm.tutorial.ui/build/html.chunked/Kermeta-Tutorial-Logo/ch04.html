<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>Chapter&nbsp;4.&nbsp;Editor</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><meta name="keywords" content="Kermeta, metamodeling, language, kmLogo"><link rel="home" href="index.html" title="Logo Tutorial : Building kmLogo DSL using Kermeta"><link rel="up" href="index.html" title="Logo Tutorial : Building kmLogo DSL using Kermeta"><link rel="prev" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Define the metamodel"><link rel="next" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Model manipulation in Kermeta"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;4.&nbsp;Editor</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch05.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a name="chapter_editor.link"></a>Chapter&nbsp;4.&nbsp;Editor<span></span><a name="chapter_editor"></a></h2></div></div></div><p>In this task, you will learn how to provide editors to create model instances which
      conforms to your metamodel. There are many ways to do so however in this tutorial we will
      focus more on the textual editor. As these techniques are independant each others, you can
      experiment each of them according to your needs.</p><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section_dynamic_instance.link"></a>4.1.&nbsp;Dynamic instance<span></span><a name="section_dynamic_instance"></a></h2></div></div></div><p>First option is through the dynamic instance. To do so :</p><div class="procedure"><ol type="1"><li><p>Open the file <span class="bold"><strong>ASMLogo.ecorediag</strong></span> inside the folder
              <span class="bold"><strong>org.kermeta.kmlogo.logoasm.model/model</strong></span>.</p></li><li><p> Go to the <span class="bold"><strong>outline view</strong></span>. Select the top level
            element inside your metamodel (for example here the Block).</p></li><li><p> Right-click on this element and choose <span class="bold"><strong>Create a dynamic
              instance</strong></span>.</p><div class="figure"><a name="d0e535"></a><div class="figure-contents"><div class="mediaobject"><img src="Kermeta-Tutorial-Logo_figures/KermetaDynamicInst.png" alt="Creating a dynamic instance"></div></div><p class="title"><b>Figure&nbsp;4.1.&nbsp;Creating a dynamic instance</b></p></div><br class="figure-break"><p> Name your dynamic model "dots.xmi" and hit finish.</p></li></ol></div><p>Then you can add childs or sibling for the element to construct you model instance. At
        the end, you can obtain a model conform to the logo language in xmi format. </p><p>If you want to learn more, follow the complete example below or check out the other
        available example in the FSM Tutorial.</p><div class="example"><a name="d0e547"></a><div class="example-contents"><div class="orderedlist"><ol type="1"><li><p>Right-click on the file "dots.xmi" and choose "open with .. &gt; Sample Reflective
              Ecore Model Editor".</p></li><li><p>In the editor, unfold "...dots.xmi" and right-click on Block element. Choose
                <span class="bold"><strong>New child &gt; Instructions Right</strong></span> to position the
              turtle. </p></li><li><p>Then, right-click on "Instruction Right" and choose <span class="bold"><strong>New
                child &gt; Angle Constant</strong></span> to define the angle of the rotation. Select the
              element "Constant" and in the properties view, set the <span class="bold"><strong>Intetger
                Value</strong></span> to 90.</p></li><li><p>We set the fisrt instruction. In the editor, right-click and choose <span class="bold"><strong>Validate</strong></span> to check wether your model instance newly created is
              conform to the defined metamodel.</p></li><li><p>Then you can keep on building your model instance : Right-click on "Right"
              element, choose <span class="bold"><strong>New Sibling &gt; Instructions penDown</strong></span> to
              tell the turtle to be "ready to write".</p></li><li><p> After that, Right-click on "PenDown" and choose <span class="bold"><strong>New Sibling
                &gt; Instructions Forward</strong></span> then like we did before, create the <span class="bold"><strong>steps Constant</strong></span> child and set the value to 10. That tell the
              turtle to "draw" the line on 10 of the given metric (pixel).</p></li><li><p>Repeat these above steps to complete your model instance like the illustration
              below and do not forget to <span class="bold"><strong>Validate</strong></span> to check
              conformance from time to time.</p></li></ol></div></div><p class="title"><b>Example&nbsp;4.1.&nbsp;Example creation of the dots.xmi</b></p></div><br class="example-break"><div class="figure"><a name="d0e596"></a><div class="figure-contents"><div class="mediaobject"><img src="Kermeta-Tutorial-Logo_figures/KermetaBlocXmi.png" alt="dots.xmi illustration"></div></div><p class="title"><b>Figure&nbsp;4.2.&nbsp;dots.xmi illustration</b></p></div><br class="figure-break"><p>You have just finished creating your first model instance, save it and keep an eye on it
        because we are going to reuse it later in this tutorial.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section_tree_view_editor.link"></a>4.2.&nbsp;Tree view editor<span></span></h2></div></div></div><p>Using the tree-view editor is the second way to manipulate metamodel instances. Open
        your ecore file and select a top level element inside your metamodel (for instance Block).
        Right-click on that element and seclect New Child or New Sibling to add elements like we've
        seen on the previous section.</p><p>This step is also largly covered in the FSM tutorial.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section_textual_editor.link"></a>4.3.&nbsp;Textual editor<span></span></h2></div></div></div><p>A textual editor is also available in order to create a model instance conform to our
        metamodel and can be processed by the interpreter. In this example we will use <a class="ulink" href="http://www.emftext.org" target="_top">EMFText</a> to generate the concrete syntax of our
        metamodel. </p><p>Follow these steps to set up the concrete syntax of your language and its assocoated
        textual editor : </p><div class="procedure"><ol type="1"><li><p>Create a java project and name it : <span class="bold"><strong>org.kermeta.kmlogo.logoasm.emftexteditor</strong></span>. Create a folder <span class="bold"><strong>concrete_syntax</strong></span> inside.</p></li><li><p>Back to the project<span class="bold"><strong>
              org.kermeta.kmlogo.logoasm.tutorial</strong></span>, open the folder <span class="bold"><strong>1.metamodel/concrete_syntax</strong></span> which contain the file : <span class="bold"><strong>ASMLogo.cs</strong></span>.</p></li><li><p>Copy and paste this file into the newly created folder <span class="bold"><strong>org.kermeta.kmlogo.logoasm.emftexteditor/concrete_syntax/</strong></span>.</p><p>Right-clic on the file <span class="bold"><strong>ASMLogo.cs</strong></span> and choose "Open
            With ..." &gt; "EMFText cs editor". Analyse its content : it follow the structure of .cs
            file as described in the <a class="ulink" href="http://www.emftext.org/index.php/EMFText_CS_Language_Reference" target="_top">emftext CS
              language reference</a>.</p><p>Here, we defined the file extension of our DSL (logo), link it to our metamodel
            (through the nsUri) and define the style and the concrete rules for each concept that we
            want to map.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="gfx/admonitions/tip.gif"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you meet with some errors, be sure that you register your ecore and that the
              path to your genmodel is correct.</p></td></tr></table></div></li><li><p>Right-click on <span class="bold"><strong>ASMLogo.cs</strong></span> file and choose <span class="bold"><strong>generate Text Ressource</strong></span>.</p><p>This would add two project in your structure : <span class="bold"><strong>org.emftext.commons.antlr3_1_1</strong></span> and <span class="bold"><strong>org.kermeta.kmlogo.logoasm.model.kmLogo.resource.logo</strong></span>.</p></li></ol></div><p>You have just finished to set up your text editor. Keep going through this tutorial to
        test it inside a real interpreter.</p></div><div class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section_gmf_editor.link"></a>4.4.&nbsp;GMF editor<span></span></h2></div></div></div><p>The graphical way to manipulate your metamodel can be done with the GMF editor. </p><p>For further information, please refer to the FSM tutorial on how to graphically edit
        your metamodel.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;3.&nbsp;Define the metamodel&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;5.&nbsp;Model manipulation in
      Kermeta</td></tr></table></div></body></html>