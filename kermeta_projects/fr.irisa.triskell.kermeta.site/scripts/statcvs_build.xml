<!-- $Id: statcvs_build.xml,v 1.1 2008-07-31 14:56:37 dvojtise Exp $ -->
<project name="Build StatCVS" default="all" basedir=".">
	<description>
       
	</description>
	
	<property name="statcvs.jar" location="/udd/triskell/bin/multiplatform/statcvs-0.4.0/statcvs.jar"/>
	<property name="notes.txt" location="/tmp/kermeta_build/src/fr.irisa.triskell.kermeta.site/scripts/html/report-notes.txt"/>
	<property name="cvs.log" location="logfile.log"/>
	<property name="output.dir" location="statcvs"/>
        
	
	<target name="all">
		<antcall target="stats"/>
		<antcall target="patch_gforge_cvsweb_links"/>
	</target>
	<target name="checkout_log">
		<!-- <cvs output="${cvs.log}">
			<commandline>
				<argument line="log src"/>
			</commandline>
		</cvs> -->
	</target>
 	<target name="stats"> 
 		<taskdef name="statcvs"
                classname="net.sf.statcvs.ant.StatCvsTask" 
                classpath="${statcvs.jar}"/> 
        <statcvs log="${cvs.log}" 
        	path="." 
        	title="StatCVS"
            outputDir="${output.dir}" 
            notes="html/report-notes.txt" 
            viewcvs="http://gforge.inria.fr/plugins/scmcvs/cvsweb.php/" 
            exclude="**/*.xmi;**/*.km;**/*.ecore;**/*.uml;**/*.traceability;**/*.smap;**/*.genmodel;**/*.ecoredi;**/*.umldi;**/fr.irisa.triskell.kermeta.parser.gen.*/*;**/build/java/**;**/migrationv032_v040/ast/**;kermeta_projects/org.kermeta.framework.compiled/**"
            tags=".*"/>
    </target>
    <target name="patch_gforge_cvsweb_links">
        <replace dir="${output.dir}" >
            <include name="**/*.html"/>
            <replacetoken><![CDATA[" class="webrepository"]]></replacetoken>
            <replacevalue><![CDATA[&amp;cvsroot=kermeta" class="webrepository"]]></replacevalue>
        </replace>
        
    </target>
</project>