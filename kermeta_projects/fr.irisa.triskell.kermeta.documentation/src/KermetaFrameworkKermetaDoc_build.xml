<project name="KermetaFramework" default="all">
	<!-- configuration properties -->
	
	<!-- project configuration -->
	<property name="project.base.dir" location=".."/>
	<property name="eclipse.home" location="../../.."/>
	<property name="project.name" value="KermetaFramework"/>
	<property name="build.dir" location="${project.base.dir}/build"/>
	<!--<property name="deployment.dest" location="\\\\jersey\\triskell\\www\\triskell\\softwares\\kermeta\\docs"/>-->
	<property name="deployment.dest" location="\\\\jersey\\triskell\\www\\kermeta.org\\docs"/>
	
	
	<path id="project.class.path">
		<fileset dir="${eclipse.home}/plugins">
		    <include name="**/org.eclipse.emf.common_*.jar"/>
			<include name="**/org.eclipse.emf.ecore_*.jar"/>
			<include name="**/org.eclipse.emf.ecore.xmi_*.jar"/>
			<include name="**/org.eclipse.emf.validation_*.jar"/>
			<include name="**/org.eclipse.equinox.common_*.jar"/>
			<include name="**/org.eclipse.equinox.registry_*.jar"/>
			<include name="**/org.eclipse.equinox.preferences_*.jar"/>
			<include name="**/org.eclipse.osgi_*.jar"/>
			<include name="**/org.eclipse.core.runtime_*.jar"/>
			<include name="**/org.eclipse.core.jobs_*.jar"/>
			<include name="**/org.eclipse.core.resources_*.jar"/>
			<include name="**/org.eclipse.ui.workbench_*.jar"/>
			<include name="**/org.eclipse.jface_*.jar"/>
			<include name="**/org.eclipse.swt.*.jar"/>
		</fileset>	
		<pathelement location="../lib/xercesImpl.jar"/>
		<pathelement location="../../fr.irisa.triskell.eclipse.util/bin"/>
		<pathelement location="../../org.kermeta.log4j.util/bin/"/>
		<pathelement location="../../org.kermeta.log4j.util/lib/thirdparty/commons-logging-1.1.1/commons-logging-1.1.1.jar"/>
		<pathelement location="../../fr.irisa.triskell.traceability.model/bin"/>
		<pathelement location="../../fr.irisa.triskell.kermeta.io/build/class"/>
		<pathelement location="../../org.kermeta.io.loader/bin"/>
		<pathelement location="../../org.eclipse.gymnast.runtime.core/bin"/>
		<pathelement location="../../org.antlr.antlr2/bin"/>
		<pathelement location="../../fr.irisa.triskell.kermeta.model/build/class"/>
		<pathelement location="../../fr.irisa.triskell.kermeta.interpreter/build/class"/>
		<pathelement location="../../fr.irisa.triskell.kermeta/lib/thirdparty/emfatic-core.jar"/>
		<pathelement location="../../fr.irisa.triskell.kermeta/lib/thirdparty/ldt-core.jar"/>
		<pathelement location="../../fr.irisa.triskell.kermeta.model/lib/thirdparty/log4j.jar"/>

	</path>
	<target name="all" depends="compile,kdoc">
	</target>
	
	<target name="compile">
		<javac srcdir="java"
			 destdir="${build.dir}/class">
			<classpath refid="project.class.path"/>
		</javac>
	</target>
	
	<target name="kdoc">
		<property name="KermetaFramework.output" value="${build.dir}/html/KermetaFramework/"/>
		<mkdir dir="${KermetaFramework.output}"/>
        <java 
        	classname="fr.irisa.triskell.kermeta.docutils.KM2HTMLMain"
        	dir=".."
        	fork="yes">
        	<classpath>
			   	<pathelement location="../build/class/"/> 
				<path refid="project.class.path"/> 
			</classpath>
        	<arg value="${KermetaFramework.output}" />
		</java>
       	<copy todir="${KermetaFramework.output}" >
       		<fileset file="../src/html/screen.css"></fileset>
		</copy>

		<copy todir="${KermetaFramework.output}/figures">
			<fileset dir="../src/figures"/>
		</copy>
    </target>

	
</project>