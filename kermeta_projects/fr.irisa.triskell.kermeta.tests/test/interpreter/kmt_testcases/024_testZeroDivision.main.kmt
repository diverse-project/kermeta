@mainClass "root_package::Main"
@mainOperation "main"


package root_package;


require kermeta
using kermeta::standard
using kermeta::kunit

class Main inherits kermeta::kunit::TestCase
{
    operation main() : Void is do 
		var tr : TestRunner init TestRunner.new
		tr.run(Main)
		tr.printTestResult
    end
    
    operation testZeroDivision() : Void is do
     	var i : Integer
        i := 5/0
        assert(false)
        stdio.writeln(i.toString)
        rescue (c : kermeta::exceptions::DivisionByZero)
        	assert(true)
    end
    
    operation testUndeclared() : Void is do
     	var i : Integer
        var divid : Integer
       	stdio.writeln("Integer undeclared test")
        5/divid
        assert(false)
       	rescue (c : kermeta::exceptions::VoidOperandError)
        	assert(true)
    end
    
    operation testBoolUndeclared() : Void is do
    	var bool : Boolean
    	stdio.writeln("Bool undeclared test")
        bool and true
        assert(false)
        rescue (c : kermeta::exceptions::CallOnVoidTarget)
        	assert(true)
    end
    
    operation testIllegalConditionalType() : Void is do
    	stdio.writeln("Conditional exception")
    	var bool : Boolean
    	if (bool) then 
    		stdio.writeln("hello")
    	end
        assert(false)
        rescue (c : kermeta::exceptions::RuntimeError)
        	assert(true)
    end
    
}