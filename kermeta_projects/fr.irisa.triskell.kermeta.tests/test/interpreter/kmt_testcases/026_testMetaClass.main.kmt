@mainClass "metaclass_package::TestMetaClass"
@mainOperation "main"


package metaclass_package;

require kermeta

using kermeta::kunit

class TestMetaClass inherits kermeta::kunit::TestCase
{
	operation main() : Void is do
		var tr : TestRunner init TestRunner.new
		tr.run(TestMetaClass)
		tr.printTestResult
	end

    operation testMetaClassOfClass() : Void is do 
    	var type : kermeta::language::structure::Class init TheClass
    	assert(type.getMetaClass != void)
    end
    
    operation testClassDefinitionOfMetaClass() : Void is do
        var type : kermeta::language::structure::Class init TheClass
    	assert(type.getMetaClass.typeDefinition != void)
    end
    
    operation testClassDefinitionPropertiesOfMetaClass() : Void is do
        var type : kermeta::language::structure::Class init TheClass
 	  	assert(type.getMetaClass.typeDefinition.name == "Class")
    end
    
    operation testClassProperties() : Void is do
        var type : kermeta::language::structure::Class init TheClass
        stdio.writeln(type.typeDefinition.qualifiedName)
        stdio.writeln(type.name)
    	assert(type.typeDefinition.qualifiedName == "metaclass_package::TheClass") 
    	assert(type.name == "TheClass")
    end
    
    operation testClassContents() : Void is do
        var type : kermeta::language::structure::Class init TheClass
    	assert(type.ownedOperation.size == 2)
    	assert(type.ownedAttribute.size == 1)
    end
}

class TheClass
{
	reference aReference : kermeta::standard::String
	
	operation anOperation() is do
	end
	
	operation anotherOperation() is do
	end
}