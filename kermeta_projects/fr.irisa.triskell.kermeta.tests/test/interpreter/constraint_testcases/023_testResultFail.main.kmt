/* $Id: 023_testResultFail.main.kmt,v 1.2 2008-07-31 16:11:46 dvojtise Exp $
 * Creation date: January 23, 2007
 * License:
 * Copyright:
 * Authors:
 */
@mainClass "resultFail::Main"
@mainOperation "main"


package resultFail;


require kermeta

using kermeta::standard
using kermeta::exceptions
using kermeta::kunit

class Main inherits TestCase
{

	operation main() : Void is do
    	var tr : TestRunner init TestRunner.new
		tr.run(Main)
		tr.printTestResult
    end		

    operation test0() : Void is do 
        truc("bidule")
        assert(false)
       	rescue (err : ConstraintViolatedPost)
       		stdio.writeln(err.toString)
       		stdio.writeln(err.message)
       		assert(true)   
    end
    
    
    operation truc(param : String)  : String
    post lapost is do result == param end
    is
     do   	
        stdio.writeln("test")
        result := param
        
        // to make the execution fail:
 		result := "not bidule"
        
     end
     
}