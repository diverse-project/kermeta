<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin
   id="fr.irisa.triskell.kermeta.runner"
   name="Runner Plug-in"
   version="0.0.5"
   provider-name="INRIA/IRISA"
   class="fr.irisa.triskell.kermeta.runner.RunnerPlugin">

   <runtime>
      <library name="runner_kermeta.jar">
         <export name="*"/>
      </library>
   </runtime>

   <requires>
      <import plugin="org.eclipse.ui"/>
      <import plugin="org.eclipse.core.resources"/>
      <import plugin="org.eclipse.emf.common"/>
      <import plugin="org.eclipse.emf.ecore"/>
      <import plugin="org.eclipse.ui.console"/>
      <import plugin="org.eclipse.debug.core"/>
      <import plugin="org.eclipse.core.runtime"/>
      <import plugin="org.eclipse.debug.ui"/>
      <import plugin="org.junit"/>
      <import plugin="org.eclipse.jdt"/>
      <import plugin="org.eclipse.emf.ecore.xmi"/>
      <import plugin="org.eclipse.jdt.launching"/>
      <import plugin="fr.irisa.triskell.kermeta"/>
   </requires>

   <extension point="org.eclipse.ui.popupMenus">
      <objectContribution
            objectClass="org.eclipse.core.resources.IFile"
            nameFilter="*.kmt"
            id="fr.irisa.triskell.kermeta.runner.contribution1">
         <menu
               label="KermetaMenu"
               path="additions"
               id="fr.irisa.triskell.kermeta.runner.menu1">
            <separator
                  name="group1">
            </separator>
         </menu>
         <action
               label="KermetaTheRun"
               class="fr.irisa.triskell.kermeta.runner.popup.actions.KermetaRun"
               menubarPath="additions"
               enablesFor="1"
               id="fr.irisa.triskell.kermeta.runner.newAction">
         </action>
      </objectContribution>
   </extension>
   <!-- Extension point for the Kermeta Run menu item in the Run properties -->
   <extension point="org.eclipse.debug.core.launchConfigurationTypes">
    <launchConfigurationType
        name="Kermeta Run Configuration"
        delegate="fr.irisa.triskell.kermeta.runner.launching.KermetaLaunchConfiguration"
        modes="run, debug"               
        id="KermetaLaunchConfiguration">        
    </launchConfigurationType>
   </extension>
  
   <!-- Source locator -->
   <extension point = "org.eclipse.debug.core.sourceLocators">
	<sourceLocator
		id = "KermetaSourceLocator"
	   	class="fr.irisa.triskell.kermeta.runner.launching.KermetaSourceLocator"
	   	name="Kermeta Source Locator"/>
	</extension>
	<!-- Tab groups for the launch configuration manager -->
      <extension
         point="org.eclipse.debug.ui.launchConfigurationTabGroups">
      <launchConfigurationTabGroup
            type="KermetaLaunchConfiguration"
            class="fr.irisa.triskell.kermeta.runner.launching.KermetaLaunchConfigTabGroup"
            id="KermetaTabGroup">
         <launchMode
               description="blabla"
               mode="run"/>
      </launchConfigurationTabGroup>
   </extension> 
   <!-- Launch is contained in this class 
      <extension
            point="org.eclipse.debug.core.launchConfigurationTypes">
         <launchConfigurationType
               delegate="fr.irisa.triskell.kermeta.runner.launching.KermetaLaunchConfiguration"
               public="true"
               name="fr.irisa.triskell.kermeta.runner.launching.KermetalaunchConfigurationType"
               modes="run"
               id="kermetaLaunchConfigurationType"/>
      </extension> -->
   <!-- Perspective -->
      <extension
            point="org.eclipse.ui.perspectiveExtensions">
         <perspectiveExtension targetID="org.eclipse.ui.resourcePerspective">
            <newWizardShortcut id="org.eclipse.jdt.ui.wizards.NewProjectCreationWizard"/>
            <viewShortcut id="org.eclipse.jdt.ui.TypeHierarchy"/>
            <perspectiveShortcut id="org.eclipse.debug.ui.DebugPerspective"/>
            <actionSet id="org.eclipse.jdt.ui.JavaActionSet"/>
            <view
                  ratio="0.5"
                  relationship="left"
                  relative="org.eclipse.ui.views.ResourceNavigator"
                  id="org.eclipse.jdt.ui.PackageExplorer"/>
         </perspectiveExtension>
      </extension>
      <extension
            point="org.eclipse.core.resources.builders">
      </extension>
      <extension
            id="KermetaPerspective"
            name="kermetaPerspective"
            point="org.eclipse.ui.perspectives">
         <perspective
               icon="icons/sample.gif"
               class="fr.irisa.triskell.kermeta.runner.perspective.KermetaPerspectiveFactory"
               name="kermetaPerspective"
               id="kermetaPerspective"/>
      </extension>
      <extension
            point="org.eclipse.debug.core.launchDelegates">
         <launchDelegate
               delegate="fr.irisa.triskell.kermeta.runner.launching.KermetaLaunchConfiguration"
               type="fr.irisa.triskell.kermeta.runner.launchDelegate1"
               modes="run"
               id="fr.irisa.triskell.kermeta.runner.launchDelegate1"/>
      </extension>
      <extension
            point="org.eclipse.debug.ui.launchGroups">
         <launchGroup
               bannerImage="icons/sample.gif"
               label="fr.irisa.triskell.kermeta.runner.launchGroup1"
               mode="run"
               image="icons/sample.gif"
               id="fr.irisa.triskell.kermeta.runners.launchGroup1"/>
      </extension>

</plugin>
