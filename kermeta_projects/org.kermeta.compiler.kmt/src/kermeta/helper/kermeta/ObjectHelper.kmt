/* $Id: ObjectHelper.kmt,v 1.7 2008-07-02 08:38:20 cfaucher Exp $
 * Creation date: January 29, 2008
 * License: EPL
 * Copyright: IRISA / INRIA / Universite Rennes 1
 * Authors: Francois Tanguy <ftanguy@irisa.fr>
 */


package kermeta::language::structure;

require kermeta

aspect class Object {

	operation getPropertyValue(propertyName : String) : Property is do
		var classDefinition : ClassDefinition init self.getMetaClass().typeDefinition.asType(ClassDefinition)
		result := (classDefinition.allAttribute.detect{ p | p.asType(Property).name == propertyName }).asType(Property)
	end
	
	//Navigate the containment path until the right type has been found
	operation getContainerAsType(type : Type) : Object is do
		result := void
		var obj : Object init self

		from var i : Integer init 0
        until i==1
        loop
            if not obj.container.isInstanceOf(type) then
            	if not obj.container.isVoid() then
            		obj := obj.container
            	else
            		i := 1
            	end
            else
            	i := 1
            	result := obj.container
			end
        end
	end
	
}