/* $Id: ContainmentPath.kmt,v 1.1 2008-03-04 19:37:39 cfaucher Exp $
 * Creation date: March 4, 2008
 * License: EPL
 * Copyright: IRISA / INRIA / Universite Rennes 1
 * Authors: Cyril Faucher <cfaucher@irisa.fr>
 *
 */

@mainClass "test::ContainmentPath"
@mainOperation "generateContainmentPath"


package test;

require kermeta
require "http://www.eclipse.org/emf/2002/Ecore"
require "containment_traversable_ecore.kmt"

using ecore
using kermeta::language::structure
using kermeta::persistence
using kermeta::utils

class ContainmentPath
{
	operation generateContainmentPath() : Void is do 
		var input : String init "platform:/resource/org.kermeta.compiler.kmt/models/DefaultName.ecore"
		var root : EPackage init loadEcoreModel(input)
		
		var res : StringBuffer init StringBuffer.new
		root.eachOwnedElement{ e |
			res.append(e.printPath() + "\n")
		}
		stdio.writeln(res.toString())
	end
	
	operation loadEcoreModel(input: String) : ecore::EPackage is do           
	   		var resource : Resource init EMFRepository.new.getResource(input)
	       	resource.load()
	      	
	      	// result is a EPackage
	        result ?= resource.instances.one
   	end
}