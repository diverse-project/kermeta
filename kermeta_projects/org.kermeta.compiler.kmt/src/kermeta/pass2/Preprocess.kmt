/* $Id: Preprocess.kmt,v 1.1 2008-07-02 08:38:20 cfaucher Exp $ 
 * Creation : July 1, 2008
 * Licence  : EPL 
 * Copyright:
 * Authors  : 
 *            Cyril Faucher <cfaucher@irisa.fr>
 */

package kermeta::language::structure;

require kermeta
require "http://www.eclipse.org/emf/2002/Ecore"
require "platform:/resource/org.kermeta.compiler.kmt/src/kermeta/helper/kermeta/KermetaHelper.kmt"

using ecore

aspect class ModelingUnit {

	operation preprocess() : Void is do 
		
		//Creation of an EDataType for the exception
		var exception_EDataType : EDataType init EDataType.new
		exception_EDataType.name := "KRuntimeException"
		exception_EDataType.instanceClassName := "org.kermeta.compil.runtime.helper.exception.KRuntimeException"
		exception_EDataType.serializable := false
		
		stdio.writeln("retrievePackage() " + retrievePackage("kermeta::exceptions").name)
		self.retrievePackage("kermeta::exceptions").ecoreModelElement.eClassifiers().add(exception_EDataType)
		
	end
}