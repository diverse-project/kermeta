<!-- $Id: dist_n_deploy_build.xml,v 1.22 2007-07-26 08:33:53 cfaucher Exp $ -->
<project name="kermeta_framework" default="all" basedir=".">
	
	<description>
        Deploy the dist jar to the projects that use it
    </description>
	
	<property name="eclipse_dir" location="C:/eclipse3.3_1"/>
	
	<path id="project.class.path">
		
		<pathelement location="build/class"/>

	  	<pathelement location="../fr.irisa.triskell.eclipse.util/build/class"/>
	  	<pathelement location="../fr.irisa.triskell.kermeta.io/build/class"/>
	  	<pathelement location="../fr.irisa.triskell.kermeta.model/build/class"/>
	  	<pathelement location="../fr.irisa.triskell.kermeta.interpreter/build/class"/>
  		<pathelement location="../fr.irisa.triskell.traceability.model/build/class"/>

	  	<pathelement location="lib/thirdparty/log4j.jar"/>
	  	<pathelement location="lib/thirdparty/antlr.jar"/>
	  	<pathelement location="lib/thirdparty/ldt-core.jar"/>
	  	<pathelement location="lib/thirdparty/emfatic-core.jar"/>
  		
		<pathelement location="${eclipse_dir}/plugins/org.eclipse.emf.common_2.3.0.v200706200000.jar"/>
	    <pathelement location="${eclipse_dir}/plugins/org.eclipse.emf.ecore_2.3.0.v200706200000.jar"/>
	    <pathelement location="${eclipse_dir}/plugins/org.eclipse.emf.ecore.xmi_2.3.0.v200706200000.jar"/>
	    <pathelement location="${eclipse_dir}/plugins/org.eclipse.emf_2.3.0.v200706200000.jar"/>
		
		<pathelement location="${eclipse_dir}/plugins/org.eclipse.ui_3.3.0.I20070614-0800.jar"/>
		<pathelement location="${eclipse_dir}/plugins/org.eclipse.core.runtime_3.3.100.v20070530.jar"/>
		<pathelement location="${eclipse_dir}/plugins/org.eclipse.core.resources_3.3.0.v20070604.jar"/>
		
	</path>

	<target name="all"
		description="create and deploy the jar file and the km file">
		<!--<antcall target="create_framework"/>-->
		<antcall target="deploy"/>	
	</target>
	<target name="deploy" 
		description="deploy the framework file">
		<delete dir="../fr.irisa.triskell.kermeta.io/src/kermeta"/>
		<copy todir="../fr.irisa.triskell.kermeta.io/src/kermeta">
		  <fileset dir="dist"
		  />
		</copy>
	</target>
	
	<target name="create_framework" 
			description="create the km file">
		<delete dir="dist"/>
		<mkdir dir="dist"/>
		<java classname="fr.irisa.triskell.kermeta.dev.framework.CompileFramework">
			<classpath refid="project.class.path"/>
		</java>
	</target>

</project>