@mainClass "testBenchmark::Test_benchmark"
@mainOperation "testBenchmark"

package testBenchmark;

require kermeta

class Test_benchmark inherits kermeta::kunit::Test {

    operation testBenchmark() : kermeta::standard::Integer is do
 		var v1 : kermeta::standard::Integer init 0
 		var nbIter : kermeta::standard::Integer init 1000
		var str : kermeta::standard::String
		var truc : Truc
		
		//str := stdio.read("Press enter")
		truc := Truc.new
		truc.machin := 0
		from var i : kermeta::standard::Integer init 0
		until i == nbIter
		loop
			v1 := operation_asg(v1)
			i := i + 1
			truc.machin := truc.machin + 1
		end
		assert(v1==nbIter)
        stdio.writeln(v1.toString())
		result := v1
    end

    operation operation_asg(in : kermeta::standard::Integer) : kermeta::standard::Integer is do
        result := in + 1
    end


}

class Truc
{
	attribute machin : kermeta::standard::Integer
}
