@mainClass "root_package::Main"
@mainOperation "main"


package root_package;


require kermeta
using kermeta::standard

class Main inherits kermeta::kunit::TestCase
{
    operation main() : Void is do 
       //testZeroDivision
       testUndeclared
    end
    
    operation testZeroDivision() : Void is do
     	var i : Integer
        i := 5/0
        stdio.writeln(i.toString)
        rescue kermeta::exceptions::DivisionByZero
        	stdio.writeln("Division par zero")
    end
    
    operation testUndeclared() : Void is do
       	stdio.writeln("Integer undeclared test")
     	var i : Integer
        var divid : Integer
        5/divid
        assert(false)
        rescue (c : kermeta::exceptions::CallOnVoidTarget)
        	assert(true)
    end
    
    operation testBoolUndeclared() : Void is do
    	stdio.writeln("Bool undeclared test")
    	var bool : Boolean
        bool and true
        assert(false)
        rescue (c : kermeta::exceptions::CallOnVoidTarget)
        	assert(true)
    end
    
    operation testIllegalConditionalType() : Void is do
    	stdio.writeln("Conditional exception")
    	var bool : Boolean
    	if (bool) then 
    		stdio.writeln("hello")
    	end
        assert(false)
        rescue (c : kermeta::exceptions::RuntimeError)
        	assert(true)
    end
    
}