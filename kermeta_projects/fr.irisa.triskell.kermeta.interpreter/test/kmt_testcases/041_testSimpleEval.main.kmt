/* $Id: 041_testSimpleEval.main.kmt,v 1.3 2006-12-06 16:00:05 dvojtise Exp $
 * Creation date: May 5, 2006
 * License: EPL
 * Copyright: INRIA / IRISA
 * Authors: Didier Vojtisek
 */
 
@mainClass "testSimpleEval::TestEx"
@mainOperation "test1"

package testSimpleEval;

require kermeta

using kermeta::standard
using kermeta::interpreter
using kermeta::utils

class TestEx inherits kermeta::kunit::TestCase {

	operation test1() is do
		
		var de : DynamicExpression init DynamicExpression.new
		
		de.initializeDefaults
	
		de.formalParameters.put("a", String)
		
		de.parse("stdio.writeln(a)")
			
		
		var params : Hashtable<String, Object> init Hashtable<String, Object>.new
		params.put("a", "hello world!")
		
		de.execute(void, params)
		
		
	end	
	
	
	operation test2() is do
		
		var de : DynamicExpression init DynamicExpression.new
		
		de.initializeDefaults
	
		
		de.parse("2 + 2")
			
		
		var params : Hashtable<String, Object> init Hashtable<String, Object>.new
		
		assert(de.execute(void, params) == 4)
		
		stdio.writeln(de.execute(void, params).toString)
		
	end	
	
}