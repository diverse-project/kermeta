@mainClass "testUML2km::Main"
@mainOperation "main"

package testUML2km;

require "input_test_models/UML2.km"
using uml2

class Main inherits kermeta::kunit::Test {


	operation main () is do
		stdio.writeln("This program counts types in UML2")
		
		stdio.write("getting UML2 package...")
		
		var p : kermeta::reflection::Package
		p ?= Class.typeDefinition.container
		
		stdio.writeln("got "+ p.name + " package")
		
		var i : kermeta::standard::Integer init 0
		stdio.write("counting...")
		p.ownedTypeDefinition.each{ t | 
			//stdio.write(".")
			i := i + 1
		}
		stdio.writeln("done")
		
		stdio.writeln("There are " + i.toString + " types in UML2")
		assert(i==246)
	end
	
	operation test () is do
		main
	end
	
	operation printDoc() is do
		"".toString.size
			
	end

}