/* $Id: 065_testInheritFromCollection.main.kmt,v 1.1 2007-03-30 09:59:11 dvojtise Exp $ */
/* 
 * Test what happen when we inherit from collection, eventually from a class that 
 * is not generic or is generic with diferent parametrized type
 * used to check bug #1811
 */

@mainClass "InheritFromCollection::Tester"
@mainOperation "main"

package InheritFromCollection;

require kermeta

using kermeta::standard
using kermeta::utils
using kermeta::language::structure
using kermeta::kunit

class Tester inherits kermeta::kunit::TestCase {

	operation main() : Void is do
		var tr : TestRunner init TestRunner.new
		tr.run(Tester)
		tr.printTestResult
	end	

	operation testInheritFromSetOfString() : Void is do
		var stringSet : InheritFromSetOfString init InheritFromSetOfString.new
		
		assert(stringSet.size == 0)
		stdio.writeln("before add")
		stringSet.add("hello")
		stdio.writeln("after add")
		assert(stringSet.size == 1)
		stringSet.add("world")
		assert(stringSet.size == 2)
		assert(stringSet.contains("hello"))
	end
	
	operation testParametricInheritFromSet() : Void is do
		var stringSet : ParametricInheritFromSet<Integer,String> init ParametricInheritFromSet<Integer,String>.new
		
		assert(stringSet.size == 0)
		stdio.writeln("before add")
		stringSet.add("hello")
		stdio.writeln("after add")
		assert(stringSet.size == 1)
		stringSet.add("world")
		assert(stringSet.size == 2)
		assert(stringSet.contains("hello"))
	end
	
}

class InheritFromSetOfString inherits kermeta::standard::Set<String> {

}

class ParametricInheritFromSet<G,H> inherits kermeta::standard::Set<H> {

}