<!-- $Id: deploy_jar_build.xml,v 1.2 2005-04-27 07:28:13 dvojtise Exp $ -->
<project name="kermeta_interpreter.jar" default="all" basedir=".">
	
	<description>
        Deploy the dist jar to the projects that use it
    </description>
	
	<property name="kermeta.interpreter.jar" location="dist/${ant.project.name}"/>

	<target name="all"
		description="create and deploy the jar file">
		<antcall target="create_jar"/>
		<antcall target="deploy"/>	
	</target>
	<target name="deploy" 
		description="deploy the jar file">
		<copy file="${kermeta.interpreter.jar}" todir="../fr.irisa.triskell.kermeta.texteditor/lib/"/>
		<copy file="${kermeta.interpreter.jar}" todir="../fr.irisa.triskell.kermeta.io/lib/"/>
		<copy file="${kermeta.interpreter.jar}" todir="../fr.irisa.triskell.kermeta.framework/lib/"/>
	</target>
	
	<target name="create_jar" 
		description="create the jar file">
		<tstamp/>
		<jar destfile="${kermeta.interpreter.jar}">
			<!-- files to include in the jar -->
			<fileset dir="build/class"/>
			<fileset dir="src/java"/>
			<!-- manifest to include -->
		    <manifest>
		    	<attribute name="Built-By" value="${user.name}"/>  
				<attribute name="Class-Path" value=""/>
		    	<section name="${ant.project.name}">
		      		<attribute name="Specification-Title" value="${ant.project.name}"/>
      				<attribute name="Specification-Version" value="${TSTAMP} ${TODAY}"/>
      				<attribute name="Specification-Vendor" value="Irisa/Triskell"/>
      				<attribute name="Implementation-Title" value="common"/>
      				<attribute name="Implementation-Version" value="${TSTAMP} ${TODAY}"/> 
      				<attribute name="Implementation-Vendor" value="Irisa/Triskell"/>
    			</section>
		    </manifest>
		</jar>
	</target>
</project>