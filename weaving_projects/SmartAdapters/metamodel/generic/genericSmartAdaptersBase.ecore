<?xml version="1.0" encoding="ASCII"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore">
  <ecore:EAnnotation source="ModellingUnit">
    <details key="require" value="http://www.eclipse.org/emf/2002/Ecore|platform:/resource/fr.irisa.triskell.kermeta.patternmatching/src/kermeta/pattern/metamodel/PatternFramework.ecore|"/>
    <details key="using" value="kermeta::standard|kermeta::utils|patternframework|org::smartadapters::core|org::smartadapters::extension|ecore|org|"/>
  </ecore:EAnnotation>
  <ecore:EPackage name="org" nsURI="platform:/resource/SmartAdapters/metamodel/generic/genericSmartAdaptersBase.ecore#/" nsPrefix="org">
    <eSubpackages name="smartadapters" nsURI="platform:/resource/SmartAdapters/metamodel/generic/genericSmartAdaptersBase.ecore#/org/smartadapters" nsPrefix="smartadapters">
      <eSubpackages name="core" nsURI="platform:/resource/SmartAdapters/metamodel/generic/genericSmartAdaptersBase.ecore#/org/smartadapters/core" nsPrefix="core">
        <eClassifiers xsi:type="ecore:EClass" name="Adapter">
          <eSuperTypes href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/language/structure.ecore#/1/language/structure/Object"/>
          <eStructuralFeatures xsi:type="ecore:EReference" name="aspect" lowerBound="1" eType="/1/smartadapters/core/Aspect" containment="true"/>
          <eStructuralFeatures xsi:type="ecore:EReference" name="adapt" upperBound="-1" eType="/1/smartadapters/core/Adaptation" containment="true" eOpposite="/1/smartadapters/core/Adaptation/adapter"/>
          <eStructuralFeatures xsi:type="ecore:EAttribute" name="name">
            <eAnnotations source="kermeta">
              <details key="isComposite" value="true"/>
            </eAnnotations>
            <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
          </eStructuralFeatures>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="Aspect">
          <eSuperTypes href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/language/structure.ecore#/1/language/structure/Object"/>
          <eStructuralFeatures xsi:type="ecore:EReference" name="template" containment="true">
            <eType xsi:type="ecore:EClass" href="../../../fr.irisa.triskell.kermeta.patternmatching/src/kermeta/pattern/metamodel/PatternFramework.ecore#//ModelPattern"/>
          </eStructuralFeatures>
          <eStructuralFeatures xsi:type="ecore:EReference" name="structure" lowerBound="1" containment="true">
            <eType xsi:type="ecore:EClass" href="../../../fr.irisa.triskell.kermeta.patternmatching/src/kermeta/pattern/metamodel/PatternFramework.ecore#//PModel"/>
          </eStructuralFeatures>
          <eStructuralFeatures xsi:type="ecore:EReference" name="persistent" upperBound="-1">
            <eAnnotations source="kermeta">
              <details key="documentation" value="/**&#xD;&#xA;   persistent refers to aspectual PObject that must not be&#xD;&#xA;   cloned between two bindings&#xD;&#xA;   TODO : contraints...&#xD;&#xA;   */"/>
            </eAnnotations>
            <eType xsi:type="ecore:EClass" href="../../../fr.irisa.triskell.kermeta.patternmatching/src/kermeta/pattern/metamodel/PatternFramework.ecore#//PObject"/>
          </eStructuralFeatures>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="Adaptation" abstract="true" eSuperTypes="/1/smartadapters/extension/AdapterElement">
          <eOperations name="check">
            <eAnnotations source="kermeta">
              <details key="isAbstract" value="true"/>
            </eAnnotations>
            <eType xsi:type="ecore:EClass" href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/standard/primitive_types.ecore#/1/standard/Boolean"/>
          </eOperations>
          <eOperations name="execute">
            <eAnnotations source="kermeta">
              <details key="isAbstract" value="true"/>
              <details key="documentation" value="/**&#xD;&#xA;   Execute the adaptation for a given binding&#xD;&#xA;   Sub-classes must implement this method&#xD;&#xA;   */"/>
            </eAnnotations>
            <eAnnotations source="kermeta.pre">
              <details key="checking" value="check"/>
            </eAnnotations>
          </eOperations>
          <eStructuralFeatures xsi:type="ecore:EReference" name="adapter" lowerBound="1" eType="/1/smartadapters/core/Adapter" eOpposite="/1/smartadapters/core/Adapter/adapt"/>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="cloneAdaptation" abstract="true" eSuperTypes="/1/smartadapters/core/Adaptation">
          <eStructuralFeatures xsi:type="ecore:EAttribute" name="isUnique" eType="/1/smartadapters/core/uniqueType">
            <eAnnotations source="kermeta">
              <details key="isComposite" value="true"/>
            </eAnnotations>
          </eStructuralFeatures>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="createAdaptation" abstract="true" eSuperTypes="/1/smartadapters/core/Adaptation">
          <eStructuralFeatures xsi:type="ecore:EAttribute" name="isUnique" eType="/1/smartadapters/core/uniqueType">
            <eAnnotations source="kermeta">
              <details key="isComposite" value="true"/>
            </eAnnotations>
          </eStructuralFeatures>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="setAdaptation" abstract="true" eSuperTypes="/1/smartadapters/core/Adaptation"/>
        <eClassifiers xsi:type="ecore:EClass" name="unsetAdaptation" abstract="true" eSuperTypes="/1/smartadapters/core/Adaptation"/>
        <eClassifiers xsi:type="ecore:EClass" name="makeUnique" eSuperTypes="/1/smartadapters/core/Adaptation">
          <eOperations name="check">
            <eAnnotations source="kermeta" references="/1/smartadapters/core/Adaptation/check">
              <details key="body" value="do&#xA;&#x9;var res : kermeta::standard::Boolean init false&#xA;&#x9;if adapter.aspect.structure.isNotEqual(void) then&#xA;&#x9;&#x9;if adapter.aspect.structure.content.isNotEqual(void) then&#xA;&#x9;&#x9;&#x9;res := (element.isNotEqual(void)) and (adapter.aspect.structure.content.contains(element))&#xA;&#xA;&#x9;&#x9;end&#xA;&#xA;&#x9;end&#xA;&#x9;result := res&#xA;end"/>
              <details key="superOperation" value="org::smartadapters::core::Adaptation"/>
            </eAnnotations>
            <eType xsi:type="ecore:EClass" href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/standard/primitive_types.ecore#/1/standard/Boolean"/>
          </eOperations>
          <eOperations name="execute">
            <eAnnotations source="kermeta" references="/1/smartadapters/core/Adaptation/execute">
              <details key="body" value="do&#xA;&#x9;adapter.aspect.persistent.add(element)&#xA;end"/>
              <details key="superOperation" value="org::smartadapters::core::Adaptation"/>
            </eAnnotations>
          </eOperations>
          <eStructuralFeatures xsi:type="ecore:EReference" name="element" lowerBound="1">
            <eType xsi:type="ecore:EClass" href="../../../fr.irisa.triskell.kermeta.patternmatching/src/kermeta/pattern/metamodel/PatternFramework.ecore#//PObject"/>
          </eStructuralFeatures>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EEnum" name="uniqueType">
          <eLiterals name="unique" literal="unique"/>
          <eLiterals name="non_unique" value="1" literal="non_unique"/>
          <eLiterals name="onDemand" value="2" literal="onDemand"/>
        </eClassifiers>
      </eSubpackages>
      <eSubpackages name="extension" nsURI="platform:/resource/SmartAdapters/metamodel/generic/genericSmartAdaptersBase.ecore#/org/smartadapters/extension" nsPrefix="extension">
        <eClassifiers xsi:type="ecore:EClass" name="AdapterElement">
          <eSuperTypes href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/language/structure.ecore#/1/language/structure/Object"/>
          <eStructuralFeatures xsi:type="ecore:EAttribute" name="name">
            <eAnnotations source="kermeta">
              <details key="isComposite" value="true"/>
            </eAnnotations>
            <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
          </eStructuralFeatures>
          <eStructuralFeatures xsi:type="ecore:EAttribute" name="isOptional">
            <eAnnotations source="kermeta">
              <details key="isComposite" value="true"/>
            </eAnnotations>
            <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
          </eStructuralFeatures>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="DerivableAdapter" eSuperTypes="/1/smartadapters/core/Adapter">
          <eStructuralFeatures xsi:type="ecore:EReference" name="alternatives" upperBound="-1" eType="/1/smartadapters/extension/EntityAlternative" containment="true"/>
          <eStructuralFeatures xsi:type="ecore:EReference" name="constraints" upperBound="-1" eType="/1/smartadapters/extension/Constraint" containment="true" eOpposite="/1/smartadapters/extension/Constraint/adapter"/>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="EntityAlternative" eSuperTypes="/1/smartadapters/extension/AdapterElement">
          <eStructuralFeatures xsi:type="ecore:EReference" name="xor" upperBound="-1" eType="/1/smartadapters/extension/AdapterElement" containment="true"/>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="EntityConjunction" eSuperTypes="/1/smartadapters/extension/AdapterElement">
          <eStructuralFeatures xsi:type="ecore:EReference" name="and" upperBound="-1" eType="/1/smartadapters/extension/AdapterElement" containment="true"/>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="Constraint" abstract="true">
          <eSuperTypes href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/language/structure.ecore#/1/language/structure/Object"/>
          <eOperations name="check">
            <eAnnotations source="kermeta">
              <details key="isAbstract" value="true"/>
            </eAnnotations>
            <eType xsi:type="ecore:EClass" href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/standard/primitive_types.ecore#/1/standard/Boolean"/>
            <eParameters name="d" eType="/1/smartadapters/extension/Derivation"/>
          </eOperations>
          <eStructuralFeatures xsi:type="ecore:EReference" name="adapter" lowerBound="1" eType="/1/smartadapters/extension/DerivableAdapter" eOpposite="/1/smartadapters/extension/DerivableAdapter/constraints"/>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="MutualExclusion" eSuperTypes="/1/smartadapters/extension/Constraint">
          <eOperations name="check">
            <eAnnotations source="kermeta" references="/1/smartadapters/extension/Constraint/check">
              <details key="body" value="do&#xA;&#x9;var c : kermeta::standard::Set&lt;org::smartadapters::extension::AdapterElement> init kermeta::standard::Set&lt;org::smartadapters::extension::AdapterElement>.new&#xA;&#x9;c.addAll(d.selectedOptions)&#xA;&#x9;d.elements.each{e | c.add(e.selectedVariant)}&#xA;&#x9;result := (c.intersection(entities).size) &lt;= (1)&#xA;end"/>
              <details key="superOperation" value="org::smartadapters::extension::Constraint"/>
            </eAnnotations>
            <eType xsi:type="ecore:EClass" href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/standard/primitive_types.ecore#/1/standard/Boolean"/>
            <eParameters name="d" eType="/1/smartadapters/extension/Derivation"/>
          </eOperations>
          <eStructuralFeatures xsi:type="ecore:EReference" name="entities" lowerBound="2" upperBound="-1" eType="/1/smartadapters/extension/AdapterElement"/>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="Dependency" eSuperTypes="/1/smartadapters/extension/Constraint">
          <eOperations name="check">
            <eAnnotations source="kermeta" references="/1/smartadapters/extension/Constraint/check">
              <details key="body" value="do&#xA;&#x9;var c : kermeta::standard::Collection&lt;org::smartadapters::extension::AdapterElement> init kermeta::standard::Set&lt;org::smartadapters::extension::AdapterElement>.new&#xA;&#x9;c.addAll(d.selectedOptions)&#xA;&#x9;d.elements.each{e | c.add(e.selectedVariant)}&#xA;&#x9;result := (not (c.contains(source))) or (c.containsAll(self.dependencies))&#xA;end"/>
              <details key="superOperation" value="org::smartadapters::extension::Constraint"/>
            </eAnnotations>
            <eType xsi:type="ecore:EClass" href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/standard/primitive_types.ecore#/1/standard/Boolean"/>
            <eParameters name="d" eType="/1/smartadapters/extension/Derivation"/>
          </eOperations>
          <eStructuralFeatures xsi:type="ecore:EReference" name="source" lowerBound="1" eType="/1/smartadapters/extension/AdapterElement"/>
          <eStructuralFeatures xsi:type="ecore:EReference" name="dependencies" lowerBound="1" upperBound="-1" eType="/1/smartadapters/extension/AdapterElement"/>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="Derivation">
          <eSuperTypes href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/language/structure.ecore#/1/language/structure/Object"/>
          <eStructuralFeatures xsi:type="ecore:EReference" name="elements" upperBound="-1" eType="/1/smartadapters/extension/DerivationElement"/>
          <eStructuralFeatures xsi:type="ecore:EReference" name="selectedOptions" upperBound="-1" eType="/1/smartadapters/extension/AdapterElement"/>
        </eClassifiers>
        <eClassifiers xsi:type="ecore:EClass" name="DerivationElement">
          <eSuperTypes href="../../../../plugin/fr.irisa.triskell.kermeta.io/src/kermeta/language/structure.ecore#/1/language/structure/Object"/>
          <eStructuralFeatures xsi:type="ecore:EReference" name="alternative" lowerBound="1" eType="/1/smartadapters/extension/EntityAlternative"/>
          <eStructuralFeatures xsi:type="ecore:EReference" name="selectedVariant" lowerBound="1" eType="/1/smartadapters/extension/AdapterElement"/>
        </eClassifiers>
      </eSubpackages>
    </eSubpackages>
  </ecore:EPackage>
</xmi:XMI>
