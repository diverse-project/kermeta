package hrc;
require kermeta
require "../../model/HRC.kmt"
using kermeta::standard
 
@aspect "true"
class Expression {
		operation type1( ):DataType is
		  abstract	
		  operation conformsTo(o: DataType):Boolean is
		  abstract
		  
}

@aspect "true" 
class ActionSpecification
{
operation involves(as : ActionSpecification):Boolean is
do
  result := false
end
} 

@aspect "true" 
class DataType
{
operation isBoolean():Boolean is
do
  result := false
end
} 


@aspect "true" 
class Assignment
{
inv  inv1 is 
 do
 ~value.conformsTo(target.type1)
end 

} 
@aspect "true" 
class IfAction
{
inv  inv2 is 
 do
 condition.type1.isBoolean
end 

} 





@aspect "true" 
class LoopAction
{
inv  inv7 is 
 do
 self.condition.type1.isBoolean
end 

} 
@aspect "true" 
class SwitchAction
{
inv  inv8 is 
 do
  do 
 var dt : DataType init self.switchExpression.type1
self.case.collect{e | e.~value }.forAll{ ex | ex.conformsTo(dt)}

end 
end  

} 
@aspect "true" 
class BlockPin
{
method  type1():DataType is
do
  result := self.type
end
} 

@aspect "true" 
class Contract
{
inv  inv10 is 
 do
 promise.context == self.context and assumption.context == self.context
end 

} 


} 
@aspect "true" 
class PinLink
{
inv  inv13 is 
 do
 self.pin.forAll{ p | not (p.oclIsKindOf(BlockPin)) or ( do var variable1 : BlockPin init p  variable1 end .block == self.block or do var variable2 : BlockPin init p  variable2 end .block.owner == self.block)
}
end 

} 


 } 
