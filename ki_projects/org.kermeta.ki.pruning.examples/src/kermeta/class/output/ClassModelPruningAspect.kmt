package ex::classModel;
require kermeta
require "platform:/resource/org.kermeta.ki.pruning.examples/src/kermeta/class/ClassModel.ecore"
require "ClassModelPruning.kmt"

using kermeta::standard

aspect class Clazz {
	attribute visited : Boolean

	operation visit(theClassModelPruning : ClassModelPruning, theClazzs : Bag<Clazz>) : Void is do
		self.visited := true
		theClassModelPruning.onClazzAdded(self)
		theClassModelPruning.addedClazzs.add(self)
		self.superClasses.each{theClazz | theClazzs.add(theClazz) }
	end

	operation addClazzs(theClassModelPruning : ClassModelPruning) : Void is do
		self.superClasses.each{theClazz |
			if(not theClazz.visited.isVoid) then
				theClassModelPruning.onsuperClassesAdded(self, theClazz)
			end
		}
	end
}
