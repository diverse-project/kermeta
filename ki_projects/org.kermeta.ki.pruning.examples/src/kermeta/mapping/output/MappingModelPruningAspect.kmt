package ex::mappingModel;
require kermeta
require "platform:/resource/org.kermeta.ki.pruning.examples/src/kermeta/mapping/MappingModel.ecore"
require "MappingModelPruning.kmt"
require "classModelPruningAspect.kmt"
using ex::classModel
using kermeta::standard

aspect class Mapping {
	attribute visited : Boolean

	operation initialisesrcsOpposite() : Void is do
		self.srcs.each{theClazz | theClazz.srcsOpposite.add(self) }
	end

	operation initialisetargetsOpposite() : Void is do
		self.targets.each{theClazz | theClazz.targetsOpposite.add(self) }
	end

	operation visit(theMappingModelPruning : MappingModelPruning, theClazzs : Bag<Clazz>) : Void is do
		self.srcs.each{theClazz | if(not theClazz.visited) then theClazzs.add(theClazz) end }
		self.targets.each{theClazz | if(not theClazz.visited) then theClazzs.add(theClazz) end }
	end
}
