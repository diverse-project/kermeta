/*
 * Creation : November 24, 2010
 * Licence  : EPL
 * Copyright: INRIA Rennes, Triskell Team
 * Authors  : Arnaud Blouin
 */
@mainClass "featureDiagram::Test"
@mainOperation "main"


package featureDiagram;

require kermeta
require "./output/FeatureDiagramSlicer.kmt"

using kermeta::persistence
using kermeta::standard
using kermeta::utils


class Test {
	operation main() : Void is do
		var inputRep : EMFRepository init EMFRepository.new
		var inputRes : EMFResource
		inputRes ?= inputRep.createResource("./ACH12.xmi", "./featureDiagram.ecore")
		inputRes.load()
		var fd : FeatureDiagram
		fd ?= inputRes.one
		
		var requiredFeatures : Bag<Feature> init fd.features.select{feat |
			feat.name=="A" or feat.name=="B" or feat.name=="C" or feat.name=="D" or feat.name=="E" or feat.name=="F"
		}
		
		var pruning : FeatureDiagramSlicer init FeatureDiagramSlicer.new.initialise(requiredFeatures, fd)
		
		pruning.launch()
	end
}
