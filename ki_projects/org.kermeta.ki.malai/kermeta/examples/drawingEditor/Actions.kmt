/* $Id:$ 
 * Creation : February 8, 2010
 * Licence  : EPL 
 * Copyright:
 * Authors  : 
 *            ablouin
 */

package kermeta::ki::malai::examples;


require kermeta
require "platform:/resource/org.kermeta.ki.malai/kermeta/action/Action.kmt"
require "platform:/resource/org.kermeta.ki.malai/kermeta/examples/drawingEditor/ActivePresentation.kmt"

using kermeta::standard
using kermeta::ki::malai::action


class ActionSelect inherits Action {
	reference selection : Shape[0..*]
	
	reference drawing : Drawing
	
	
	
	method doActionBody() : Void is do
		drawing.clearSelection()
		
		selection.each { sh |
			drawing.addToSelection(sh)
		}
	end
	
	
	
	operation setSelection(selection : Shape) : Void is do
		self.selection.clear()
		
		if(not selection.isVoid) then
			self.selection.add(selection)
		end
	end
	
	
	
	method canDo() : Boolean is do
		result := not drawing.isVoid
	end
	
	
	method cancelledBy<T : Action>(action : T) : Boolean is do
		result := self.isInstanceOf(T)
	end
}
