<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Realize the &laquo;&nbsp;aspect&nbsp;&raquo; version of the translator</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.2  (Linux)">
	<META NAME="CREATED" CONTENT="20071211;9300000">
	<META NAME="CHANGEDBY" CONTENT="Vincent Mahe">
	<META NAME="CHANGED" CONTENT="20071211;9300000">
</HEAD>
<BODY LANG="fr-FR" BGCOLOR="#ffffff" DIR="LTR">
<H1><FONT FACE="Nimbus Sans L"><FONT SIZE=5>Realize the &laquo;&nbsp;aspect&nbsp;&raquo;
version of the translator</FONT></FONT></H1>
<P>In the classical version of the translator, we used the GOF
Visitor design pattern (in a simplified version, but we could use the
UML2 MDK TopDownVisitor) for navigation inside the UML StateMachine
model. As we needed two passes in order to manage links once the
output objects have been created, this implied two Kermeta classes
with visitXxx() methods plus a hash table.</P>
<P>With the aspect approach, you can store the FSM created object in
a reference of the original UML corresponding object and have two
operations (<I>uml2fsm_pass1()</I> and <I>uml2fsm_pass2()</I>) for
the creation pass and the linkage pass on each UML object.</P>
<H2>Step 1: the application structure and launcher</H2>
<P>As the aspects must be applied to the real package of the
aspectized elements, it is easier to split the whole transformation
in a Kermeta launching file and a <I>aspectizor</I> file which will
weave the new features to the UML2 metamodel.</P>
<P>The launcher must:</P>
<UL>
	<LI><P>load the UML model,</P>
	<LI><P>get the model root,</P>
	<LI><P>execute the Pass1 method on this root (just execute the pass1
	method on the root :-)),</P>
	<LI><P>execute the Pass2 method on this root,</P>
	<LI><P>catch the generated FSM model,</P>
	<LI><P>save the FSM model.</P>
</UL>
<P>All those tasks do not rely upon aspect so you can use the
Translator code of the <I>src/kermeta/translator.kmt</I> file for
inspiration in order to realize the &laquo;&nbsp;aspect&nbsp;&raquo;
launcher (have a look on the <I>src/answer/aspect_translator</I> file
if you do not succeed in this work).</P>
<P>The real aspects can be writen in a separate file (like
<I>uml2fsm_aspects.kmt</I>). For each UML2 element you need to
transform into its FSM equivalent, you must add (as an aspect, of
course) an <I>output</I> reference (the place to store its FSM
equivalent) and the two passes methods <I>uml2fsm_pass1()</I> and
<I>uml2fsm_pass2()</I>.</P>
<H2>Step 2: the first pass</H2>
<P>A large part of the classical implementation of the first pass
(<I>visitXxx()</I> methods in <I>src/kermeta/translator.kmt</I> file)
can be used in the aspect uml2fsm_pass1 method.</P>
<P>But the operation you are writing will be directly the UML object
operation so you do not need to handle this object and you can access
it simply with <B>self</B> keyword. The effect is a simplier code for
the same goal.</P>
<P>In the same way, the FSM generated object can be stored in an
<I>output</I> reference which is specific to the UML object. It means
that you can (and must) strongly type this reference. Its give your
application a strongness which you cannot afford with a <I>&lt;object,
object&gt;</I> hash table (and you do not have to seam uncertain
casts which complicate the code).</P>
<P>Below is the example for the uml::StateMachine class:</P>
<DL>
	<DD><P ALIGN=LEFT><FONT FACE="Sans"><FONT SIZE=2><FONT COLOR="#000000">@</FONT><FONT COLOR="#000064">aspect</FONT><FONT COLOR="#000000">
	</FONT><FONT COLOR="#3f5fbe">&quot;true&quot;<BR></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>class</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>StateMachine
	</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>reference</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>output</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	: </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsm</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>FSM<BR></FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>	operation</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml2fsmPass1</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>()
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>is</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>do<BR>	</B></FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>	output</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	:= </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsm</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>FSM</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>new</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>	self</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>region</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>each</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>r</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	| </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>r</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml2fsmPass1</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	}<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>end<BR></B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>}</FONT></FONT></FONT></FONT></FONT></P></DD></DL>
<P>
You can compare with the classical way:</P>
<DL>
	<DD><P ALIGN=LEFT><FONT FACE="Sans"><FONT SIZE=2><FONT COLOR="#000064"><B>class</B></FONT><FONT COLOR="#000000">
	</FONT><FONT COLOR="#000064">Uml2Fsm_Pass1</FONT><FONT COLOR="#000000">
	{<BR>	</FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>reference</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>tmpTable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	:
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>kermeta</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>utils</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Hashtable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>&lt;</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Element</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>,<BR>							</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>kermeta</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>standard</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Object</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>&gt;<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>operation</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>initialize</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>table</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	:
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>kermeta</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>utils</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Hashtable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>&lt;</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Element</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>,<BR>							</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>kermeta</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>standard</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Object</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>&gt;)
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>is</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>do<BR>		</B></FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>tmpTable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	:= </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>table<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>end<BR>	operation</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>visitStateMachine</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>node</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	: </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>StateMachine</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>is</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>do<BR>		var</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsmNode</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	: </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsm</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>FSM</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>init</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsm</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>FSM</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>new</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	<BR>		</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>node</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>region</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>each</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>r</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	| </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>visitRegion</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>r</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)
	}<BR>		</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>tmpTable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>put</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>node</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>,
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsmNode</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>end<BR>}</B></FONT></FONT></FONT></FONT></FONT></P></DD></DL>
<P>
You no more need a hash table (and its initialization) nor a visitor
design pattern nor a reference to the visited UML node.</P>
<H2>Step 3: the second pass</H2>
<P>As tha aspect approach only adds methods and properties to
existing metamodel elements, you only must write the uml2fsm_pass2()
method where you need, which means on the same UML classes than the
first pass.</P>
<P>As the UML states and transitions do not directly know their
container (only derivated property which is not implemented in the
metamodel, off course), you may pass the FSM root to the pass2
methods as a parameter.</P>
<P>The aspect second pass code is even more simple than in classical
approach because you do not need now to get the first pass objects
through a local variable and an enforced type cast.</P>
<P>Below is the example for the uml::Region class:</P>
<DL>
	<DD><P ALIGN=LEFT><FONT FACE="Sans"><FONT SIZE=2><FONT COLOR="#000000">@</FONT><FONT COLOR="#000064">aspect</FONT><FONT COLOR="#000000">
	</FONT><FONT COLOR="#3f5fbe">&quot;true&quot;<BR></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>class</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Region
	</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>operation</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml2fsmPass1</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>()
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>is</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>do<BR>		</B></FONT></FONT></FONT><FONT COLOR="#41825a"><FONT FACE="Sans"><FONT SIZE=2>//
	nothing to create<BR>		</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>self</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>subvertex</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>each</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>v</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>|
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>v</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml2fsmPass1</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	}<BR>		</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>self</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>transition</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>each</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>t</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>|
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>t</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml2fsmPass1</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	}<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>end<BR>	operation</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml2fsmPass2</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>outModel</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	: </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsm</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>FSM</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>is</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>do<BR>		self</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>subvertex</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>each</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>sv</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	|<BR>			</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>outModel</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>ownedState</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>add</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>sv</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>output</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)<BR>		}<BR>		</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>self</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>subvertex</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>each</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>v</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>|
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>v</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml2fsmPass2</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>outModel</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)
	}<BR>		</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>self</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>transition</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>each</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>t</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>|
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>t</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml2fsmPass2</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>outModel</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)
	}<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>end<BR></B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>}</FONT></FONT></FONT></FONT></FONT></P></DD></DL>
<P>
You can compare with the classical code:</P>
<DL>
	<DD><P ALIGN=LEFT><FONT FACE="Sans"><FONT SIZE=2><FONT COLOR="#000064"><B>class</B></FONT><FONT COLOR="#000000">
	</FONT><FONT COLOR="#000064">Uml2Fsm_Pass2</FONT><FONT COLOR="#000000">
	{<BR>	</FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>reference</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>tmpTable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	:
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>kermeta</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>utils</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Hashtable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>&lt;</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Element</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>,<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>kermeta</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>standard</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Object</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>&gt;<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>reference</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsmMachine</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	: </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsm</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>FSM<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>operation</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>initialize</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>table</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	:
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>kermeta</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>utils</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Hashtable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>&lt;</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Element</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>,<BR>						</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>kermeta</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>standard</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Object</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>&gt;)
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>is</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>do<BR>		</B></FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>tmpTable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	:= </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>table<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>end<BR>	operation</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>visitRegion</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>node</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	: </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>uml</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>Region</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>is</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>do<BR>		</B></FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>node</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>subvertex</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>each</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>sv</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	|<BR>			</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>visitVertex</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>sv</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)<BR>			</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>var</B></FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>state</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	: </FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsm</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>::</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>State<BR>			state</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	?=
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>tmpTable</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>getValue</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>sv</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)<BR>			</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>fsmMachine</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>ownedState</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>add</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>state</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)<BR>		}<BR>		</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>node</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>transition</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>.</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>each</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>{
	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>t</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>
	|<BR>			</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>visitTransition</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>(</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2>t</FONT></FONT></FONT><FONT COLOR="#000000"><FONT FACE="Sans"><FONT SIZE=2>)<BR>		}<BR>	</FONT></FONT></FONT><FONT COLOR="#000064"><FONT FACE="Sans"><FONT SIZE=2><B>end<BR>}</B></FONT></FONT></FONT></FONT></FONT></P></DD></DL>
<P>
So you can notice how the Kermeta aspect approach is a powerful tool
for Model Driven Engineering.</P>
</BODY>
</HTML>